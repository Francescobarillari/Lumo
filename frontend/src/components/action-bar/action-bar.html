<div class="action-bar">
    <button class="add-event-btn button" (click)="onAddEvent()">Add Event</button>

    <div class="icon-circle notification-icon" (click)="toggleNotifications($event)">
        <mat-icon>notifications</mat-icon>
        @if (hasUnread) {
        <span class="unread-indicator"></span>
        }
        @if (showNotifications) {
        <notification-menu [userId]="loggedUser?.id || 0" (click)="$event.stopPropagation()"
            (openChat)="onOpenChatFromNotification($event)" (close)="showNotifications = false"></notification-menu>
        }
    </div>

    <div class="profile-trigger" (click)="toggleUserMenu($event)">
        @if (loggedUser?.profileImage) {
        <img [src]="loggedUser?.profileImage" alt="Profile" class="profile-image">
        } @else {
        <div class="profile-placeholder">{{ getInitials(loggedUser?.name || loggedUser?.email || '') }}</div>
        }
        @if (showUserMenu) {
        <UserMenu (click)="$event.stopPropagation()" (close)="showUserMenu = false" (action)="onMenuAction($event)">
        </UserMenu>
        }

    </div>

</div>

@if (showMyEventsModal) {
<app-my-events-modal [userId]="loggedUser?.id || 0" (close)="showMyEventsModal = false"></app-my-events-modal>
}

@if (showAccountModal) {
<app-account-modal [user]="loggedUser" (close)="showAccountModal = false" (changePhoto)="onChangePhotoFromAccount()"
    (openProfile)="onOpenProfileFromAccount($event)">
</app-account-modal>
}
