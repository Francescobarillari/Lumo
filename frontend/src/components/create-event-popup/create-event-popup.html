<div class="backdrop" (click)="onClose()"></div>

<div class="popup-container desktop">
    <div class="popup-content">
        <div class="mobile-header">
            <mat-icon (click)="onClose()">arrow_back</mat-icon>
            <h1>Crea Evento</h1>
        </div>

        <CircleIcon class="close tablet-desktop-only" [path]="'assets/icon/close.svg'" (click)="onClose()" />

        <div class="header desktop-header">
            <h1>Crea Evento</h1>
            @if(generalError) {
            <p class="error">{{ generalError }}</p>
            } @else if ((errors | keyvalue).length > 0) {
            <p class="error">{{ (errors | keyvalue)[0].value }}</p>
            }
        </div>

        <form class="form">
            <div class="two-column">
                <FormField [error]="hasError('title')" [control]="$any(form.get('title'))" [type]="'text'"
                    placeholder="Titolo" />
                <FormField [error]="hasError('city')" [control]="$any(form.get('city'))" [type]="'text'"
                    placeholder="Citt√†" />
            </div>

            <FormField [error]="hasError('description')" [control]="$any(form.get('description'))" [type]="'textarea'"
                placeholder="Descrizione" customClass="tall-field" />

            <div class="three-column">
                <FormField [error]="hasError('date')" [control]="$any(form.get('date'))" [type]="'date'"
                    placeholder="Data" />
                <FormField [error]="hasError('startTime')" [control]="$any(form.get('startTime'))" [type]="'time'"
                    placeholder="Inizio" />
                <FormField [error]="hasError('endTime')" [control]="$any(form.get('endTime'))" [type]="'time'"
                    placeholder="Fine" />
            </div>

            <div class="two-column">
                <FormField [error]="hasError('nPartecipants')" [control]="$any(form.get('nPartecipants'))"
                    [type]="'number'" placeholder="N. Partecipanti" />
                <FormField [error]="hasError('costPerPerson')" [control]="$any(form.get('costPerPerson'))"
                    [type]="'number'" [min]="0" placeholder="Costo (‚Ç¨)" />
            </div>

            <button type="button" class="button location-btn" (click)="selectLocationOnMap()">
                üìç {{ locationText }}
            </button>

            <button type="button" class="button" (click)="onSubmit()">Crea Evento</button>
        </form>
    </div>
</div>