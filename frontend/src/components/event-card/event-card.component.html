<div class="card-container">
    <div class="info-section">
        <h3 class="title">{{ title() }}</h3>
        <p class="location">{{ location() }}</p>
        <p class="date-time">{{ dateTime() }}</p>
        @if (distance()) {
        <p class="distance">{{ distance() }}</p>
        }
        @if (maxParticipants() && occupiedSpots() !== undefined) {
        <p class="spots-info">ðŸŽ« {{ maxParticipants()! - occupiedSpots()! }} spots left</p>
        }
    </div>
    @if (showActions() || showShare()) {
    <div class="actions-section">
        @if (showActions()) {
        <div class="icon-circle" (click)="focusLocation.emit(); $event.stopPropagation()">
            <mat-icon>place</mat-icon>
        </div>
        @if (!isParticipating()) {
        <div class="icon-circle" (click)="toggleFavorite.emit(); $event.stopPropagation()">
            <mat-icon [class.saved]="isSaved()">{{ isSaved() ? 'favorite' : 'favorite_border' }}</mat-icon>
        </div>
        }
        }
        @if (showShare()) {
        <div class="icon-circle" (click)="shareEvent.emit(); $event.stopPropagation()">
            <mat-icon>share</mat-icon>
        </div>
        }
    </div>
    }
</div>

@if (organizerName() && showOrganizerInfo()) {
<div class="organizer-info">
    <div class="organizer-details clickable" (click)="openOrganizerProfile.emit(); $event.stopPropagation()">
        <div class="organizer-img" [style.background-image]="organizerImage() ? 'url(' + organizerImage() + ')' : ''">
            @if (!organizerImage()) {
            <mat-icon>person</mat-icon>
            }
        </div>
        <span class="organizer-name">{{ organizerName() }}</span>
    </div>

    @if (currentUserId() && creatorId()) {
    @if (currentUserId()?.toString() === creatorId()?.toString()) {
    <span class="is-organizer-badge">You are the eventer</span>
    } @else {
    <button class="follow-btn" [class.following]="isFollowing"
        (click)="isFollowing ? unfollowOrganizer($event) : followOrganizer($event)">
        {{ isFollowing ? 'Following' : 'Follow' }}
    </button>
    }
    }
</div>
}
