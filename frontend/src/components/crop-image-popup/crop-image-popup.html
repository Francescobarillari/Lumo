<div class="crop-backdrop">
    <div class="crop-container">
        <div class="crop-header">
            <h3>Ritaglia Immagine</h3>
            <button class="close-btn" (click)="close.emit()">×</button>
        </div>

        <div class="canvas-wrapper">
            <canvas #canvas [width]="VIEWPORT_SIZE" [height]="VIEWPORT_SIZE" (mousedown)="onMouseDown($event)"
                (mousemove)="onMouseMove($event)" (mouseup)="onMouseUp()" (mouseleave)="onMouseUp()"
                (wheel)="onWheel($event)">
            </canvas>
            <div class="overlay-guide"></div>
        </div>

        <div class="controls">
            <span class="zoom-icon">−</span>
            <input type="range" min="0.1" max="5" step="0.1" [value]="scale" (input)="onZoomChange($event)">
            <span class="zoom-icon">+</span>
        </div>

        <div class="actions">
            <button class="btn-cancel" (click)="close.emit()">Annulla</button>
            <button class="btn-confirm" (click)="crop()">Salva Foto</button>
        </div>
    </div>
</div>