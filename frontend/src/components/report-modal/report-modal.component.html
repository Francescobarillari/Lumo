<div class="report-backdrop" (click)="onClose()">
    <div class="report-modal" (click)="$event.stopPropagation()">
        <div class="report-header">
            <div>
                <h3>Report {{ targetType === 'USER' ? 'user' : 'event' }}</h3>
                @if (targetLabel) {
                <p class="target-line">You are reporting: <strong>{{ targetLabel }}</strong></p>
                }
            </div>
            <button class="icon-btn" type="button" (click)="onClose()">
                <mat-icon>close</mat-icon>
            </button>
        </div>

        <div class="report-body">
            <label class="field-label">Main reason</label>
            <input class="field-input" type="text" [(ngModel)]="reason"
                placeholder="E.g. Offensive language, scam, inappropriate behavior">

            <label class="field-label">Details (optional)</label>
            <textarea class="field-input field-textarea" rows="4" [(ngModel)]="details"
                placeholder="Add any other helpful details..."></textarea>

            <label class="field-label">Image (optional)</label>
            <div class="file-row">
                <input class="file-input" type="file" accept="image/*" (change)="onFileSelected($event)">
                @if (imageName) {
                <div class="file-chip">
                    <span>{{ imageName }}</span>
                    <button type="button" class="file-remove" (click)="clearImage()">
                        <mat-icon>close</mat-icon>
                    </button>
                </div>
                }
            </div>
        </div>

        <div class="report-actions">
            <button class="button link" type="button" (click)="onClose()">Cancel</button>
            <button class="button" type="button" (click)="submitReport()" [disabled]="isSubmitting || !reason.trim()">
                {{ isSubmitting ? 'Sending...' : 'Submit report' }}
            </button>
        </div>
    </div>
</div>
