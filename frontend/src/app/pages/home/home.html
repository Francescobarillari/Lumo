<div class="home-container">
  <div class="top-bar">
    <a class="button" (click)="openSignUp()">Sign Up</a>
    <a class="button" (click)="openSignIn()">Sign In</a>
  </div>

  @if (loggedUser) {
    <h1 class="welcome">Benvenuto, {{ loggedUser.name || loggedUser.email }}!</h1>
  }

  @if (showSignUp) {
    <SignUpPopup 
        (switchToSignIn)="switchToSignIn()" 
        (close)="closeAll()" 
        (signUpSuccess)="openVerifyPopup($event.email, $event.token)"
        (signInSuccess)="onSignInSuccess($event)"
    />
  }

  @if (showVerifyPopup) {
    <VerifyEmailPopup
        [email]="recentEmail"
        [token]="recentToken"
        [verified]="emailVerified"
        (close)="closeAll()"
        (resendVerification)="resendEmail()"
    />
  }

  @if (showSignIn) {
    <SignInPopup 
        (switchToSignUp)="switchToSignUp()"  
        (close)="closeAll()"
        (signInSuccess)="onSignInSuccess($event)" 
    />
  }

  <MapView></MapView>
</div>
