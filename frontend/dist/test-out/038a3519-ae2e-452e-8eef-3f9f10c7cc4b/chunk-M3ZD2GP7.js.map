{
  "version": 3,
  "sources": ["src/services/confirmation.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nexport type ConfirmTone = 'accent' | 'danger';\n\nexport interface ConfirmDialogOptions {\n  title?: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  tone?: ConfirmTone;\n  confirmClass?: 'white-text';\n}\n\nexport interface ConfirmDialogState {\n  title: string;\n  message: string;\n  confirmText: string;\n  cancelText: string;\n  tone: ConfirmTone;\n  confirmClass?: 'white-text';\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfirmationService {\n  private readonly stateSubject = new BehaviorSubject<ConfirmDialogState | null>(null);\n  readonly state$ = this.stateSubject.asObservable();\n  private pendingResolve: ((value: boolean) => void) | null = null;\n\n  confirm(options: ConfirmDialogOptions): Promise<boolean> {\n    if (!options.message) {\n      return Promise.resolve(false);\n    }\n\n    if (this.pendingResolve) {\n      this.pendingResolve(false);\n    }\n\n    return new Promise(resolve => {\n      this.pendingResolve = resolve;\n      this.stateSubject.next({\n        title: options.title ?? 'Confirm action',\n        message: options.message,\n        confirmText: options.confirmText ?? 'Confirm',\n        cancelText: options.cancelText ?? 'Cancel',\n        tone: options.tone ?? 'accent',\n        confirmClass: options.confirmClass\n      });\n    });\n  }\n\n  resolve(result: boolean) {\n    if (this.pendingResolve) {\n      this.pendingResolve(result);\n      this.pendingResolve = null;\n    }\n    this.stateSubject.next(null);\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;IA0Ba;;;;;AA1Bb;AACA;AAyBO,IAAM,sBAAN,MAAMA,qBAAmB;MACb,eAAe,IAAI,gBAA2C,IAAI;MAC1E,SAAS,KAAK,aAAa,aAAY;MACxC,iBAAoD;MAE5D,QAAQ,SAA6B;AACnC,YAAI,CAAC,QAAQ,SAAS;AACpB,iBAAO,QAAQ,QAAQ,KAAK;QAC9B;AAEA,YAAI,KAAK,gBAAgB;AACvB,eAAK,eAAe,KAAK;QAC3B;AAEA,eAAO,IAAI,QAAQ,aAAU;AAC3B,eAAK,iBAAiB;AACtB,eAAK,aAAa,KAAK;YACrB,OAAO,QAAQ,SAAS;YACxB,SAAS,QAAQ;YACjB,aAAa,QAAQ,eAAe;YACpC,YAAY,QAAQ,cAAc;YAClC,MAAM,QAAQ,QAAQ;YACtB,cAAc,QAAQ;WACvB;QACH,CAAC;MACH;MAEA,QAAQ,QAAe;AACrB,YAAI,KAAK,gBAAgB;AACvB,eAAK,eAAe,MAAM;AAC1B,eAAK,iBAAiB;QACxB;AACA,aAAK,aAAa,KAAK,IAAI;MAC7B;;AAjCW,0BAAmB,WAAA;MAH/B,WAAW;QACV,YAAY;OACb;OACY,mBAAmB;;;",
  "names": ["ConfirmationService"]
}
