{
  "version": 3,
  "sources": ["angular:jit:template:src/components/sign-up-popup/sign-up-popup.html", "angular:jit:style:src/components/sign-up-popup/sign-up-popup.css", "src/components/sign-up-popup/sign-up-popup.ts"],
  "sourcesContent": ["<div class=\"backdrop\" (click)=\"closePopup()\" [class.mobile]=\"responsive.screen() === 'mobile'\"\n  [class.tablet]=\"responsive.screen() === 'tablet'\" [class.desktop]=\"responsive.screen() === 'desktop'\"></div>\n\n<div class=\"popup-container\" [class.mobile]=\"responsive.screen() === 'mobile'\"\n  [class.tablet]=\"responsive.screen() === 'tablet'\" [class.desktop]=\"responsive.screen() === 'desktop'\">\n\n  <div class=\"mobile-popup-container\">\n    <div class=\"mobile-header\">\n      <mat-icon (click)=\"closePopup()\">arrow_back</mat-icon>\n      <h1>Sign Up</h1>\n    </div>\n\n    <div class=\"centered-content\">\n      <div class=\"popup-content\">\n        <button class=\"close-btn close\" (click)=\"closePopup()\">\n          <mat-icon>close</mat-icon>\n        </button>\n\n        <div class=\"header desktop-header\">\n          <h1>Join LUMO</h1>\n          @if(generalError) { <p class=\"error\">{{ generalError }}</p> }\n          @else if(errors['name']) { <p class=\"error\">{{ errors['name'] }}</p> }\n          @else if(errors['birthdate']) { <p class=\"error\">{{ errors['birthdate'] }}</p> }\n          @else if(errors['email']) { <p class=\"error\">{{ errors['email'] }}</p> }\n          @else if(errors['password']) { <p class=\"error\">{{ errors['password'] }}</p> }\n          @else {<p>Start joining events</p>}\n        </div>\n\n        <form class=\"form\" [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n          <FormField [error]=\"hasError('name')\" [control]=\"form.get('name')!\" [type]=\"'text'\" placeholder=\"Full name\">\n          </FormField>\n          <FormField [error]=\"hasError('birthdate')\" [control]=\"form.get('birthdate')!\" [type]=\"'date'\"\n            placeholder=\"Birthday\"></FormField>\n          <FormField [error]=\"hasError('email')\" [control]=\"form.get('email')!\" [type]=\"'text'\" placeholder=\"Email\">\n          </FormField>\n          <FormField [error]=\"hasError('password')\" [control]=\"form.get('password')!\" [type]=\"'password'\"\n            placeholder=\"Password\" [showToggle]=\"true\"></FormField>\n          <button type=\"submit\" class=\"button\">Sign Up</button>\n        </form>\n\n        <div class=\"other-sign-up-methods\">\n          <p>or sign up with</p>\n          <a class=\"button generic\" (click)=\"signUpWithGoogle()\">\n            <img class=\"google-logo\" src=\"assets/img/google-logo.webp\" height=\"20\" />\n          </a>\n        </div>\n\n        <p>\n          Already have an account?\n          <span class=\"click-text\" (click)=\"goToSignIn()\">Sign In</span>\n        </p>\n      </div>\n    </div>\n  </div>\n</div>\n", "/* src/components/sign-up-popup/sign-up-popup.css */\n.backdrop {\n  position: fixed;\n  inset: 0;\n  background: var(--modal-backdrop-color);\n  -webkit-backdrop-filter: blur(var(--modal-backdrop-blur));\n  backdrop-filter: blur(var(--modal-backdrop-blur));\n  z-index: var(--z-backdrop);\n}\n.popup-container.desktop {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: var(--z-popup);\n}\n.popup-container.desktop .popup-content {\n  position: relative;\n  align-items: center;\n  width: 30%;\n  height: auto;\n  background: var(--modal-surface);\n  border-radius: var(--modal-radius);\n  padding: var(--spacing-2xl) 5%;\n  border: var(--modal-border);\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-lg);\n}\n.popup-container.tablet,\n.popup-container.mobile {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100vw;\n  height: 100vh;\n  z-index: var(--z-popup);\n}\n.popup-container.tablet .popup-content,\n.popup-container.mobile .popup-content {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding: var(--spacing-2xl);\n  height: 100%;\n  width: 100%;\n  background: var(--modal-surface);\n  border-radius: 0;\n  overflow-y: auto;\n  gap: var(--spacing-lg);\n  border: none;\n}\n.popup-container.mobile .mobile-popup-container,\n.popup-container.tablet .mobile-popup-container {\n  background-color: transparent;\n}\n.form {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: var(--spacing-lg);\n}\n.form * {\n  width: 100%;\n}\n.close-btn {\n  background: none;\n  border: none;\n  color: #fff;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.close-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n.close {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n}\n.header {\n  text-align: center;\n}\n.google-logo {\n  height: 20px;\n}\n.other-sign-up-methods {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--spacing-lg);\n}\n.other-sign-up-methods > * {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--spacing-lg);\n}\n.form-field.error {\n  border: 2px solid var(--color-error);\n}\n.error {\n  color: var(--color-error);\n}\n.mobile-back,\n.mobile-header {\n  display: none;\n}\n.popup-container.mobile .mobile-header,\n.popup-container.tablet .mobile-header {\n  background-color: transparent;\n}\n@media (max-width: 767px) {\n  .popup-container.desktop {\n    display: none;\n  }\n  .popup-container.tablet,\n  .popup-container.mobile {\n    display: flex;\n  }\n  .popup-content {\n    padding: var(--spacing-2xl) var(--spacing-xl);\n    justify-content: flex-start;\n    align-items: center;\n    padding-top: 0;\n  }\n  .header h1 {\n    font-size: 32px;\n  }\n  .header p {\n    font-size: 18px;\n  }\n  .form button.button {\n    height: 60px;\n    font-size: 20px;\n    border-radius: var(--radius-lg);\n  }\n  .close,\n  .desktop-header,\n  .mobile-back {\n    display: none;\n  }\n  .mobile-header {\n    display: flex;\n  }\n}\n/*# sourceMappingURL=sign-up-popup.css.map */\n", "import { Component, EventEmitter, Output } from '@angular/core';\nimport { ResponsiveService } from '../../services/responsive-service';\nimport { FormField } from '../../components/form-field/form-field';\nimport { FormBuilder } from '@angular/forms';\nimport { onlyLettersValidator, adultValidator, emailFormatValidator, strongPasswordValidator } from '../../validators/validators';\nimport { AuthService } from '../../services/auth.service';\nimport { GoogleIdentityService } from '../../services/google-identity.service';\n\nimport { MatIconModule } from '@angular/material/icon';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n@Component({\n  selector: 'SignUpPopup',\n  standalone: true,\n  imports: [FormField, MatIconModule, CommonModule, ReactiveFormsModule],\n  templateUrl: './sign-up-popup.html',\n  styleUrls: ['./sign-up-popup.css'],\n})\nexport class SignUpPopup {\n  @Output() close = new EventEmitter<void>();\n  @Output() switchToSignIn = new EventEmitter<void>();\n  @Output() signUpSuccess = new EventEmitter<{ email: string; token: string }>();\n  @Output() signInSuccess = new EventEmitter<{ id: string; name: string; email: string }>();\n\n  form: any;\n  errors: { [key: string]: string } = {};\n  generalError: string | null = null;\n\n  constructor(\n    private fb: FormBuilder,\n    private auth: AuthService,\n    private googleIdentity: GoogleIdentityService,\n    public responsive: ResponsiveService\n  ) {\n    this.form = this.fb.group({\n      name: ['', [onlyLettersValidator]],\n      birthdate: ['', [adultValidator]],\n      email: ['', [emailFormatValidator]],\n      password: ['', [strongPasswordValidator]]\n    });\n  }\n\n  onSubmit() {\n    this.errors = {};\n    this.generalError = null;\n\n    const controls = this.form.controls;\n\n    const nameErr = onlyLettersValidator(controls['name']);\n    if (nameErr) this.errors['name'] = 'Il nome deve contenere solo lettere.';\n\n    const birthErr = adultValidator(controls['birthdate']);\n    if (birthErr) this.errors['birthdate'] = 'Devi essere maggiore di 18 anni.';\n\n    const emailErr = emailFormatValidator(controls['email']);\n    if (emailErr) this.errors['email'] = 'Email non valida.';\n\n    const passwordErr = strongPasswordValidator(controls['password']);\n    if (passwordErr) {\n      this.errors['password'] = 'La password deve avere almeno 8 caratteri, una maiuscola, un numero e un simbolo.';\n    }\n\n    if (Object.keys(this.errors).length > 0) return;\n\n    const payload = {\n      name: this.form.value.name,\n      birthdate: this.form.value.birthdate,\n      email: this.form.value.email,\n      password: this.form.value.password\n    };\n\n    this.auth.signUp(payload).subscribe({\n      next: (res) => {\n        this.errors = {};\n        this.generalError = null;\n\n        if (!res?.success) {\n          this.generalError = res?.error || 'Registrazione non riuscita.';\n          return;\n        }\n\n        this.signUpSuccess.emit({\n          email: this.form.value.email,\n          token: res?.data?.token || ''\n        });\n      },\n\n      error: (err) => {\n        this.errors = {};\n        this.generalError = null;\n\n        if (err && typeof err === 'object' && 'error' in err) {\n          const body = err.error;\n\n          if (body && typeof body === 'object') {\n            if (body.data && typeof body.data === 'object') {\n              this.errors = body.data;\n              return;\n            }\n            if (body.error && typeof body.error === 'string') {\n              this.generalError = body.error;\n              return;\n            }\n          }\n\n          if (typeof err.error === 'string') {\n            this.generalError = err.error;\n            return;\n          }\n        }\n\n        if (typeof err === 'string') {\n          this.generalError = err;\n          return;\n        }\n\n        this.generalError = 'Unexpected error.';\n        console.warn('Unhandled error shape', err);\n      }\n    });\n  }\n\n  hasError(field: string): boolean {\n    return !!this.errors[field];\n  }\n\n  closePopup() {\n    this.close.emit();\n  }\n\n  goToSignIn() {\n    this.switchToSignIn.emit();\n  }\n\n  async signUpWithGoogle() {\n    this.errors = {};\n    this.generalError = null;\n\n    try {\n      const code = await this.googleIdentity.getAuthCode();\n      this.auth.loginWithGoogleCode({ code }).subscribe({\n        next: (res) => {\n          this.signInSuccess.emit({\n            id: res?.data?.id || '',\n            name: res?.data?.name || '',\n            email: res?.data?.email || ''\n          });\n          this.closePopup();\n        },\n        error: (err) => {\n          const body = err?.error;\n          if (body?.data && typeof body.data === 'object') {\n            this.errors = body.data;\n            return;\n          }\n          if (typeof body?.error === 'string') {\n            this.generalError = body.error;\n            return;\n          }\n          this.generalError = 'Google sign-in failed.';\n        }\n      });\n    } catch (e: any) {\n      if (e?.code === 'google_cancelled') {\n        return;\n      }\n      this.generalError = e?.message || 'Google sign-in failed.';\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": ["sign_up_popup_default", "init_sign_up_popup", "SignUpPopup"]
}
